{% extends 'AnalyzerDir/base.html' %}
{% load static %}
{% load bootstrap3 %}
{% block page-header %} Analyzer {% endblock %}
{% block page-sub-header %} Analyzer Analytics {% endblock %}
{% block cssimport %}

    <!-- NProgress -->
    <link href="{% static 'vendor/nprogress/nprogress.css' %}" rel="stylesheet">

    <!-- bootstrap-progressbar -->
    <link href="{% static 'vendor/bootstrap-progressbar/css/bootstrap-progressbar-3.3.4.min.css' %}" rel="stylesheet">

    <!-- select bootstrap -->
    <!--https://github.com/silviomoreto/bootstrap-select-->
    <link href="{% static 'vendor/bootstrap-select-master/dist/css/bootstrap-select.css' %}" rel="stylesheet">
    <link href="{% static 'vendor/bootstrap-select-master/dist/css/bootstrap-select.min.css' %}" rel="stylesheet">

    <!-- iCheck -->
    <link href="{% static 'vendor/iCheck/skins/flat/green.css' %}" rel="stylesheet">
    <style>
        #feature-3d . svg path{
          stroke: #000;
          stroke-width: 1px;
          stroke: rgba(0,0,0,0.2);
        }
        #feature-3d . svg{
          border: 1px solid #DED8BF;
          background-color: #f4f4d9;
          width: 700px;
          height: 400px;
        }
        #feature-3d . ul{
          width: 200px;
          float: left;
          list-style-type: none;
          margin: 0;
          padding: 0;
          padding-right: 10px;
        }
        #feature-3d . li{
          cursor: pointer;
          background-color: #c8ad93;
          padding: 10px;
          margin: 2px;
          color: #fff;
        }
    </style>
{% endblock %}


{% bootstrap_css %}
{% bootstrap_javascript %}
{% block bodycontent %}
<br/><br/><br/><br/>

    <!-- Controller panel -->
    <div class="controller">
        <!-- Analyzer Controller -->
        <div class="col-md-6 col-sm-6 col-xs-6" style="overflow:auto;">
            <div class="x_panel">
              <div class="x_title">
                <h2> Analyzer Controller <small>Pre Process/Data Analysis/Post Process</small></h2>
                <ul class="nav navbar-right panel_toolbox">
                  <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                  </li>
                  <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                    <ul class="dropdown-menu" role="menu">
                      <li><a href="#">Settings 1</a>
                      </li>
                      <li><a href="#">Settings 2</a>
                      </li>
                    </ul>
                  </li>
                  <li><a class="close-link"><i class="fa fa-close"></i></a>
                  </li>
                </ul>
                <div class="clearfix"></div>
              </div>

              <div class="x_content">
                <p class="text-muted font-13 m-b-30">
                  Whole projects lists.
                </p>

                <input type="text" id="ajax-x" placeholder="test_x"/>
                <input type="text" id="ajax-y" placeholder="test_y"/>
                  <select class="" name="">
                        <optgroup label="priority">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                        </optgroup>
                    </select>
                  <input type="text" id="ajax-status" placeholder="status"/>
                  <input type="text" id="ajax-priority" placeholder="priority"/>
                  <input type="text" id="ajax-jobname" placeholder="jobname"/>
                  <input type="text" id="ajax-jobsubmitter" placeholder="jobsubmitter"/>
                <button class="btn btn-primary" id="req">ajax request</button>

                <div id="form-div">
                    <form id="datafile-upload-form" action="" method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        <p>
                            {{ datafile_form.as_p }}
                        </p>
                        <input type="submit" class="btn btn-primary fa fa-upload" value="UPLOAD"/>
                    </form>
                </div>

                <p class="anwser-console col-md-12 col-sm-12 col-xs-12" id="anwser" style="
                    height: 200px;
                    white-space: nowrap;
                    overflow: scroll;
                    background-color:black;
                    color: seashell;">Hello!</p>
              </div>
            </div>
        </div>
    </div>

    <!-- Analyzer Task -->
    <div class="col-md-6 col-sm-6 col-xs-6">
        <div class="x_panel">
          <div class="x_title">
            <h2> Job List <small> for whole </small></h2>
            <ul class="nav navbar-right panel_toolbox">
              <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                <ul class="dropdown-menu" role="menu">
                  <li><a href="#">Settings 1</a>
                  </li>
                  <li><a href="#">Settings 2</a>
                  </li>
                </ul>
              </li>
              <li><a class="close-link"><i class="fa fa-close"></i></a>
              </li>
            </ul>
            <div class="clearfix"></div>
          </div>
          <div class="x_content">
            <!-- task-table-wrapper-->
            <div class="task-table-wrapper" style="width: 100%">
              <table class="table table-striped table-bordered bulk_action">
                <thead>
                  <tr>
                    <th>&nbsp;&nbsp;<input type="checkbox" id="check-all" class="flat"></th>
                      <th>status</th>
                    <th>priority</th>
                    <th style="display:none;"></th>
                    <th>job name</th>
                    <th>job submitter</th>
                  </tr>
                </thead>
                <tbody id="joblist">
                  {% for job in jobs %}
                  <tr>
                    <td><input type="checkbox" class="flat" name="table_records"></td>
                      <td>{{ job.job_status }}</td>
                    <td>{{ job.job_priority }}</td>
                    <td class="task-pk" style="display:none;">{{job.pk}}</td>
                    <td>{{ job.job_name }}</td>
                    <td>{{ job.job_submitter }} </td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>

              <div>
                <button class="btn btn-primary btn-sm btn-task-post" data-toggle="modal"
                        data-target="#task-post-modal">POST</button>
                <button class="btn btn-danger btn-sm btn-task-delete" data-toggle="modal"
                        data-target="#task-delete-confirm-modal">DELET</button>
              </div>
            </div>
            <!-- task-table-wrapper ends -->

          </div>
        </div>
    </div>
    <div class="clearfix"></div>

    <!-- ML Report -->
    <div class="col-md-12 col-sm-12 col-xs-12" style="overflow:auto;">
        <div class="x_panel">
            <div class="x_title">
                <h2> ML Analysis Report </h2>
                <ul class="nav navbar-right panel_toolbox">
                  <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                  </li>
                  <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                    <ul class="dropdown-menu" role="menu">
                      <li><a href="#">Settings 1</a>
                      </li>
                      <li><a href="#">Settings 2</a>
                      </li>
                    </ul>
                  </li>
                  <li><a class="close-link"><i class="fa fa-close"></i></a>
                  </li>
                </ul>
                <div class="clearfix"></div>
            </div>
            <div class="x_content">

                <div class="" role="tabpanel" data-example-id="togglable-tabs">
                  <ul id="myTab" class="nav nav-tabs bar_tabs" role="tablist">
                    <li role="presentation" class="active"><a href="#tab_content1" id="home-tab" role="tab" data-toggle="tab" aria-expanded="true">Prediction Results</a>
                    </li>
                    <li role="presentation" class=""><a href="#tab_content2" role="tab" id="profile-tab" data-toggle="tab" aria-expanded="false">Feature Engineering</a>
                    </li>
                    <li role="presentation" class=""><a href="#tab_content3" role="tab" id="profile-tab2" data-toggle="tab" aria-expanded="false">Model Tuning</a>
                    </li>
                    <li role="presentation" class=""><a href="#tab_content4" role="tab" id="profile-tab3" data-toggle="tab" aria-expanded="false">Report Stack</a>
                    </li>
                  </ul>
                    <div class="clearfix"></div>
                  <div id="myTabContent" class="tab-content">
                    <!-- panel 1 -->
                    <div role="tabpanel" class="tab-pane fade active in" id="tab_content1" aria-labelledby="home-tab">
                      <p>Raw denim you probably haven't heard of them jean shorts Austin. Nesciunt tofu stumptown aliqua, retro synth master cleanse. Mustache cliche tempor, williamsburg carles vegan helvetica. Reprehenderit butcher retro keffiyeh dreamcatcher
                        synth. Cosby sweater eu banh mi, qui irure terr.</p>
                      <!-- Prediction Results panel -->
                      <div class="x_panel">
                        <div class="x_title">
                          <h2>Prediction Results</h2>
                          <ul class="nav navbar-right panel_toolbox">
                            <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                            </li>
                            <li class="dropdown">
                              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                              <ul class="dropdown-menu" role="menu">
                                <li><a href="#">Settings 1</a>
                                </li>
                                <li><a href="#">Settings 2</a>
                                </li>
                              </ul>
                            </li>
                            <li><a class="close-link"><i class="fa fa-close"></i></a>
                            </li>
                          </ul>
                          <div class="clearfix"></div>
                        </div>
                        <div class="x_content">

                          <p>Simple table with project listing with progress and editing options</p>
                            <!-- ml report plot canvas -->
                            <div id="anwser-ml-report" style="max-width: 100%">
                            </div>
                            <!-- ml report plot canvas end -->
                        </div>
                      </div>
                      <!-- Prediction Results panel end -->
                    </div>
                    <!-- panel 2 -->
                    <div role="tabpanel" class="tab-pane fade" id="tab_content2" aria-labelledby="profile-tab">
                      <p>Food truck fixie locavore, accusamus mcsweeney's marfa nulla single-origin coffee squid. Exercitation +1 labore velit, blog sartorial PBR leggings next level wes anderson artisan four loko farm-to-table craft beer twee. Qui photo
                        booth letterpress, commodo enim craft beer mlkshk aliquip</p>
                        <!-- surface3d plot -->
                        <div id="feature-3d"></div>
                        <!-- surface3d plot end -->
                    </div>
                    <!-- panel 3 -->
                    <div role="tabpanel" class="tab-pane fade" id="tab_content3" aria-labelledby="profile-tab">
                      <p>xxFood truck fixie locavore, accusamus mcsweeney's marfa nulla single-origin coffee squid. Exercitation +1 labore velit, blog sartorial PBR leggings next level wes anderson artisan four loko farm-to-table craft beer twee. Qui photo
                        booth letterpress, commodo enim craft beer mlkshk </p>
                      <div id="model-3d"></div>
                    </div>
                    <!-- panel 4 -->
                    <div role="tabpanel" class="tab-pane fade" id="tab_content4" aria-labelledby="profile-tab">
                      <p> D3.js graph representation with JSON data format </p>
                      <div id="task-graph"></div>
                    </div>

                  </div>
                </div>

                <div class="clearfix"></div>

            </div>
            <!-- report x_content end -->
        </div>
    </div>

    <!-- Highcharts plots -->
    <div class="PostProcessor">
        <!-- PostProcessor Sample -->
        <!-- Scatter Plot -->
        <div class="col-md-12 col-sm-12 col-xs-12" style="overflow:auto;">
            <div class="x_panel">
              <div class="x_title">
                <h2> Resource Performance <small>whole projects</small></h2>
                <ul class="nav navbar-right panel_toolbox">
                  <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                  </li>
                  <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                    <ul class="dropdown-menu" role="menu">
                      <li><a href="#">Settings 1</a>
                      </li>
                      <li><a href="#">Settings 2</a>
                      </li>
                    </ul>
                  </li>
                  <li><a class="close-link"><i class="fa fa-close"></i></a>
                  </li>
                </ul>
                <div class="clearfix"></div>
              </div>


              <div class="x_content">

                <p class="text-muted font-13 m-b-30">
                    Whole projects lists.
                    <a id="g0" class="btn btn-sm btn-success" aria-label="scatter chart"><img src="{% static 'img/icons/fa-scatter-chart-o.png' %}" style="height:1.5em;"></img></a>
                    <a id="g1" class="btn btn-sm btn-success" aria-label="line chart"><i class="fa fa-line-chart"></i></a>
                    <a id="g2" class="btn btn-sm btn-success" aria-label="bar chart"><i class="fa fa-bar-chart"></i></a>
                    <a id="g3" class="btn btn-sm btn-success" aria-label="area chart"><i class="fa fa-area-chart"></i></a>
                    <a id="g4" class="btn btn-sm btn-success" aria-label="pie chart"><i class="fa fa-pie-chart"></i></a>
                </p>
                    <select class="problem">
                        <option value="">test</option>
                    </select>

                    <select class="Sample-Problem" name="Problem name">
                        <optgroup label="sample-problem">
                            <option value="MNIST">MNIST</option>
                            <option value="Iris">Iris</option>
                            <option value="ImageNet">ImageNet,Cifar-10</option>
                        </optgroup>
                    </select>
                   <select class="Sample-Solver">
                       <optgroup label="MNIST">
                            <option value="tensorflow">tensorflow</option>
                           <option value="lasagne">lasagne</option>
                            <option value="sklearn">sklearn</option>
                       </optgroup>
                       <optgroup label="Iris">
                            <option value="tensorflow">tensorflow</option>
                            <option value="sklearn">sklearn</option>
                       </optgroup>
                       <optgroup label="ImageNet">
                            <option value="AlexNet">AlexNet</option>
                            <option value="GoogleNet">GoogleNet,Inception-v3</option>
                            <option value="VGGNet">VGGNet</option>
                            <option value="ResNet">ResNet</option>
                       </optgroup>
                   </select>
                <div id="container" style="min-width: 310px; height: 400px; max-width: 800px; margin: 0 auto"></div>

              </div>
            </div>
        </div>
    </div>

{% endblock %}
{% block jsimport %}

    <!-- Cookie -->
    <script src="{% static 'js/jquery.cookie.js' %}"></script>
    <!-- FastClick -->
    <script src="{% static 'vendor/fastclick/lib/fastclick.js' %}"></script>
    <!-- NProgress -->
    <script src="{% static 'vendor/nprogress/nprogress.js' %}"></script>
    <!-- bootstrap-progressbar -->
    <script src="{% static 'vendor/bootstrap-progressbar/bootstrap-progressbar.min.js' %}"></script>
    <!-- iCheck -->
    <script src="{% static 'vendor/iCheck/icheck.min.js' %}"></script>
    <!-- Custom Theme Scripts -->
    <script src="{% static 'build/js/custom.js' %}"></script>

    <!-- Check Whether user intended to close the x_panel -->
    <script>
      $('i[class="fa fa-close"]').on('click',function(e){
        var r = confirm("Press a button");
        if (r == true) {
            x = "";
        } else {
            x = "You pressed Cancel!";
        }
      });
    </script>

    <script src="{% static 'vendor/bootstrap-select-master/dist/js/bootstrap-select.min.js' %}"></script>
    <script>
    $(document).ready(function(){
        $('.Sample-Solver optgroup').hide();
        $('.Sample-Problem').change(function(){
            var text= $(this).val();
            $('.Sample-Solver optgroup').hide();
            $('.Sample-Solver').val('');
            $('.Sample-Solver optgroup[label="'+text+'"]').css({'display':'block'});

        });
    });
    </script>

    <!-- Scatter High Charts -->
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>

    <script>
    $(document).ready(function(){
        function draw_plot(graph_select_index){
            switch(graph_select_index){
                case 0:
                    $(function () {
                        Highcharts.chart('container', {
                            chart: {
                                type: 'scatter',
                                zoomType: 'xy'
                            },
                            title: {
                                text: 'Height Versus Weight of 507 Individuals by Gender'
                            },
                            subtitle: {
                                text: 'Source: Heinz  2003'
                            },
                            xAxis: {
                                title: {
                                    enabled: true,
                                    text: 'Height (cm)'
                                },
                                startOnTick: true,
                                endOnTick: true,
                                showLastLabel: true
                            },
                            yAxis: {
                                title: {
                                    text: 'Weight (kg)'
                                }
                            },
                            legend: {
                                layout: 'vertical',
                                align: 'left',
                                verticalAlign: 'top',
                                x: 100,
                                y: 70,
                                floating: true,
                                backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF',
                                borderWidth: 1
                            },
                            plotOptions: {
                                scatter: {
                                    marker: {
                                        radius: 5,
                                        states: {
                                            hover: {
                                                enabled: true,
                                                lineColor: 'rgb(100,100,100)'
                                            }
                                        }
                                    },
                                    states: {
                                        hover: {
                                            marker: {
                                                enabled: false
                                            }
                                        }
                                    },
                                    tooltip: {
                                        headerFormat: '<b>{series.name}</b><br>',
                                        pointFormat: '{point.x} cm, {point.y} kg'
                                    }
                                }
                            },
                            series: [{
                                name: 'Female',
                                color: 'rgba(223, 83, 83, .5)',
                                data: [[161.2, 51.6], [167.5, 59.0], [159.5, 49.2], [157.0, 63.0], [155.8, 53.6],
                                    [170.0, 59.0], [159.1, 47.6], [166.0, 69.8], [176.2, 66.8], [160.2, 75.2],
                                    [172.5, 55.2], [170.9, 54.2], [172.9, 62.5], [153.4, 42.0], [160.0, 50.0],]
                            }, {
                                name: 'Male',
                                color: 'rgba(119, 152, 191, .5)',
                                data: [[174.0, 65.6], [175.3, 71.8], [193.5, 80.7], [186.5, 72.6], [187.2, 78.8],
                                    [181.5, 74.8], [184.0, 86.4], [184.5, 78.4], [175.0, 62.0], [184.0, 81.6],]
                            }]
                        });
                    });
                    break;
                case 1:
                    $(function () {
                        $.getJSON('https://www.highcharts.com/samples/data/jsonp.php?filename=usdeur.json&callback=?', function (data) {
                            var detailChart;

                            $(document).ready(function () {

                                // create the detail chart
                                function createDetail(masterChart) {

                                    // prepare the detail chart
                                    var detailData = [],
                                        detailStart = data[0][0];

                                    $.each(masterChart.series[0].data, function () {
                                        if (this.x >= detailStart) {
                                            detailData.push(this.y);
                                        }
                                    });

                                    // create a detail chart referenced by a global variable
                                    detailChart = Highcharts.chart('detail-container', {
                                        chart: {
                                            marginBottom: 120,
                                            reflow: false,
                                            marginLeft: 50,
                                            marginRight: 20,
                                            style: {
                                                position: 'absolute'
                                            }
                                        },
                                        credits: {
                                            enabled: false
                                        },
                                        title: {
                                            text: 'Historical USD to EUR Exchange Rate'
                                        },
                                        subtitle: {
                                            text: 'Select an area by dragging across the lower chart'
                                        },
                                        xAxis: {
                                            type: 'datetime'
                                        },
                                        yAxis: {
                                            title: {
                                                text: null
                                            },
                                            maxZoom: 0.1
                                        },
                                        tooltip: {
                                            formatter: function () {
                                                var point = this.points[0];
                                                return '<b>' + point.series.name + '</b><br/>' + Highcharts.dateFormat('%A %B %e %Y', this.x) + ':<br/>' +
                                                    '1 USD = ' + Highcharts.numberFormat(point.y, 2) + ' EUR';
                                            },
                                            shared: true
                                        },
                                        legend: {
                                            enabled: false
                                        },
                                        plotOptions: {
                                            series: {
                                                marker: {
                                                    enabled: false,
                                                    states: {
                                                        hover: {
                                                            enabled: true,
                                                            radius: 3
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        series: [{
                                            name: 'USD to EUR',
                                            pointStart: detailStart,
                                            pointInterval: 24 * 3600 * 1000,
                                            data: detailData
                                        }],

                                        exporting: {
                                            enabled: false
                                        }

                                    }); // return chart
                                }

                                // create the master chart
                                function createMaster() {
                                    Highcharts.chart('master-container', {
                                        chart: {
                                            reflow: false,
                                            borderWidth: 0,
                                            backgroundColor: null,
                                            marginLeft: 50,
                                            marginRight: 20,
                                            zoomType: 'x',
                                            events: {

                                                // listen to the selection event on the master chart to update the
                                                // extremes of the detail chart
                                                selection: function (event) {
                                                    var extremesObject = event.xAxis[0],
                                                        min = extremesObject.min,
                                                        max = extremesObject.max,
                                                        detailData = [],
                                                        xAxis = this.xAxis[0];

                                                    // reverse engineer the last part of the data
                                                    $.each(this.series[0].data, function () {
                                                        if (this.x > min && this.x < max) {
                                                            detailData.push([this.x, this.y]);
                                                        }
                                                    });

                                                    // move the plot bands to reflect the new detail span
                                                    xAxis.removePlotBand('mask-before');
                                                    xAxis.addPlotBand({
                                                        id: 'mask-before',
                                                        from: data[0][0],
                                                        to: min,
                                                        color: 'rgba(0, 0, 0, 0.2)'
                                                    });

                                                    xAxis.removePlotBand('mask-after');
                                                    xAxis.addPlotBand({
                                                        id: 'mask-after',
                                                        from: max,
                                                        to: data[data.length - 1][0],
                                                        color: 'rgba(0, 0, 0, 0.2)'
                                                    });


                                                    detailChart.series[0].setData(detailData);

                                                    return false;
                                                }
                                            }
                                        },
                                        title: {
                                            text: null
                                        },
                                        xAxis: {
                                            type: 'datetime',
                                            showLastTickLabel: true,
                                            maxZoom: 14 * 24 * 3600000, // fourteen days
                                            plotBands: [{
                                                id: 'mask-before',
                                                from: data[0][0],
                                                to: data[data.length - 1][0],
                                                color: 'rgba(0, 0, 0, 0.2)'
                                            }],
                                            title: {
                                                text: null
                                            }
                                        },
                                        yAxis: {
                                            gridLineWidth: 0,
                                            labels: {
                                                enabled: false
                                            },
                                            title: {
                                                text: null
                                            },
                                            min: 0.6,
                                            showFirstLabel: false
                                        },
                                        tooltip: {
                                            formatter: function () {
                                                return false;
                                            }
                                        },
                                        legend: {
                                            enabled: false
                                        },
                                        credits: {
                                            enabled: false
                                        },
                                        plotOptions: {
                                            series: {
                                                fillColor: {
                                                    linearGradient: [0, 0, 0, 70],
                                                    stops: [
                                                        [0, Highcharts.getOptions().colors[0]],
                                                        [1, 'rgba(255,255,255,0)']
                                                    ]
                                                },
                                                lineWidth: 1,
                                                marker: {
                                                    enabled: false
                                                },
                                                shadow: false,
                                                states: {
                                                    hover: {
                                                        lineWidth: 1
                                                    }
                                                },
                                                enableMouseTracking: false
                                            }
                                        },

                                        series: [{
                                            type: 'area',
                                            name: 'USD to EUR',
                                            pointInterval: 24 * 3600 * 1000,
                                            pointStart: data[0][0],
                                            data: data
                                        }],

                                        exporting: {
                                            enabled: false
                                        }

                                    }, function (masterChart) {
                                        createDetail(masterChart);
                                    }); // return chart instance
                                }

                                // make the container smaller and add a second container for the master chart
                                var $container = $('#container')
                                    .css('position', 'relative');

                                $('<div id="detail-container">')
                                    .appendTo($container);

                                $('<div id="master-container">')
                                    .css({
                                        position: 'absolute',
                                        top: 300,
                                        height: 100,
                                        width: '100%'
                                    })
                                    .appendTo($container);

                                // create master and in its callback, create the detail chart
                                createMaster();
                            });
                        });
                    });
                    break;
                case 2:
                    $(function () {
                        Highcharts.chart('container', {
                            chart: {
                                type: 'column'
                            },
                            title: {
                                text: 'Stacked column chart'
                            },
                            xAxis: {
                                categories: ['Apples', 'Oranges', 'Pears', 'Grapes', 'Bananas']
                            },
                            yAxis: {
                                min: 0,
                                title: {
                                    text: 'Total fruit consumption'
                                },
                                stackLabels: {
                                    enabled: true,
                                    style: {
                                        fontWeight: 'bold',
                                        color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
                                    }
                                }
                            },
                            legend: {
                                align: 'right',
                                x: -30,
                                verticalAlign: 'top',
                                y: 25,
                                floating: true,
                                backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || 'white',
                                borderColor: '#CCC',
                                borderWidth: 1,
                                shadow: false
                            },
                            tooltip: {
                                headerFormat: '<b>{point.x}</b><br/>',
                                pointFormat: '{series.name}: {point.y}<br/>Total: {point.stackTotal}'
                            },
                            plotOptions: {
                                column: {
                                    stacking: 'normal',
                                    dataLabels: {
                                        enabled: true,
                                        color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white'
                                    }
                                }
                            },
                            series: [{
                                name: 'John',
                                data: [5, 3, 4, 7, 2]
                            }, {
                                name: 'Jane',
                                data: [2, 2, 3, 2, 1]
                            }, {
                                name: 'Joe',
                                data: [3, 4, 4, 2, 5]
                            }]
                        });
                    });
                    break;
                case 3:
                    alert('hi');
                    break;
                case 4:
                    $(function () {
                        var colors = Highcharts.getOptions().colors,
                            categories = ['MSIE', 'Firefox', 'Chrome', 'Safari', 'Opera'],
                            data = [{
                                y: 56.33,
                                color: colors[0],
                                drilldown: {
                                    name: 'MSIE versions',
                                    categories: ['MSIE 6.0', 'MSIE 7.0', 'MSIE 8.0', 'MSIE 9.0', 'MSIE 10.0', 'MSIE 11.0'],
                                    data: [1.06, 0.5, 17.2, 8.11, 5.33, 24.13],
                                    color: colors[0]
                                }
                            }, {
                                y: 10.38,
                                color: colors[1],
                                drilldown: {
                                    name: 'Firefox versions',
                                    categories: ['Firefox v31', 'Firefox v32', 'Firefox v33', 'Firefox v35', 'Firefox v36', 'Firefox v37', 'Firefox v38'],
                                    data: [0.33, 0.15, 0.22, 1.27, 2.76, 2.32, 2.31, 1.02],
                                    color: colors[1]
                                }
                            }, {
                                y: 24.03,
                                color: colors[2],
                                drilldown: {
                                    name: 'Chrome versions',
                                    categories: ['Chrome v30.0', 'Chrome v31.0', 'Chrome v32.0', 'Chrome v33.0', 'Chrome v34.0',
                                        'Chrome v35.0', 'Chrome v36.0', 'Chrome v37.0', 'Chrome v38.0', 'Chrome v39.0', 'Chrome v40.0', 'Chrome v41.0', 'Chrome v42.0', 'Chrome v43.0'
                                        ],
                                    data: [0.14, 1.24, 0.55, 0.19, 0.14, 0.85, 2.53, 0.38, 0.6, 2.96, 5, 4.32, 3.68, 1.45],
                                    color: colors[2]
                                }
                            }, {
                                y: 4.77,
                                color: colors[3],
                                drilldown: {
                                    name: 'Safari versions',
                                    categories: ['Safari v5.0', 'Safari v5.1', 'Safari v6.1', 'Safari v6.2', 'Safari v7.0', 'Safari v7.1', 'Safari v8.0'],
                                    data: [0.3, 0.42, 0.29, 0.17, 0.26, 0.77, 2.56],
                                    color: colors[3]
                                }
                            }, {
                                y: 0.91,
                                color: colors[4],
                                drilldown: {
                                    name: 'Opera versions',
                                    categories: ['Opera v12.x', 'Opera v27', 'Opera v28', 'Opera v29'],
                                    data: [0.34, 0.17, 0.24, 0.16],
                                    color: colors[4]
                                }
                            }, {
                                y: 0.2,
                                color: colors[5],
                                drilldown: {
                                    name: 'Proprietary or Undetectable',
                                    categories: [],
                                    data: [],
                                    color: colors[5]
                                }
                            }],
                            browserData = [],
                            versionsData = [],
                            i,
                            j,
                            dataLen = data.length,
                            drillDataLen,
                            brightness;


                        // Build the data arrays
                        for (i = 0; i < dataLen; i += 1) {

                            // add browser data
                            browserData.push({
                                name: categories[i],
                                y: data[i].y,
                                color: data[i].color
                            });

                            // add version data
                            drillDataLen = data[i].drilldown.data.length;
                            for (j = 0; j < drillDataLen; j += 1) {
                                brightness = 0.2 - (j / drillDataLen) / 5;
                                versionsData.push({
                                    name: data[i].drilldown.categories[j],
                                    y: data[i].drilldown.data[j],
                                    color: Highcharts.Color(data[i].color).brighten(brightness).get()
                                });
                            }
                        }

                        // Create the chart
                        Highcharts.chart('container', {
                            chart: {
                                type: 'pie'
                            },
                            title: {
                                text: 'Browser market share, January, 2015 to May, 2015'
                            },
                            subtitle: {
                                text: 'Source: <a href="http://netmarketshare.com/">netmarketshare.com</a>'
                            },
                            yAxis: {
                                title: {
                                    text: 'Total percent market share'
                                }
                            },
                            plotOptions: {
                                pie: {
                                    shadow: false,
                                    center: ['50%', '50%']
                                }
                            },
                            tooltip: {
                                valueSuffix: '%'
                            },
                            series: [{
                                name: 'Browsers',
                                data: browserData,
                                size: '60%',
                                dataLabels: {
                                    formatter: function () {
                                        return this.y > 5 ? this.point.name : null;
                                    },
                                    color: '#ffffff',
                                    distance: -30
                                }
                            }, {
                                name: 'Versions',
                                data: versionsData,
                                size: '80%',
                                innerSize: '60%',
                                dataLabels: {
                                    formatter: function () {
                                        // display only if larger than 1
                                        return this.y > 1 ? '<b>' + this.point.name + ':</b> ' + this.y + '%' : null;
                                    }
                                }
                            }]
                        });
                    });
                    break;
                default:

            }

        }

        // {0:'scatter', 1:'line', 2:'bar', 3:'area', 4:'pie'}
        $('#g0').on('click', function(){
            draw_plot(0)
        });
        $('#g1').on('click', function(){
            draw_plot(1)
        });
        $('#g2').on('click', function(){
            draw_plot(2)
        });
        $('#g3').on('click', function(){
            draw_plot(3)
        });
        $('#g4').on('click', function(){
            draw_plot(4)
        });

    });
    </script>

    <!-- Ajax request -->
    <script>
        $(document).ready(function(){
            function worker(){
            }

            $('#req').on('click', function(){
                var csrftoken = $.cookie('csrftoken');

                function csrfSafeMethod(method) {
                    // these HTTP methods do not require CSRF protection
                    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
                }



                var x = $('#ajax-x').val();
                var y = $('#ajax-y').val();
                var status = $('#ajax-status').val();
                var priority = $('#ajax-priority').val();
                var jobname = $('#ajax-jobname').val();
                var jobsubmitter = $('#ajax-jobsubmitter').val();


                $.ajaxSetup({
                    beforeSend: function(xhr, settings) {
                        if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                            xhr.setRequestHeader("X-CSRFToken", csrftoken);
                        }

                        alert('before send!');
                        $('#req').on('click', function(){
                            $('#joblist').append(
                            "<tr>" +
                            "<td><input type='checkbox' class='flat' name='table_records'></td>" +
                            "<td>" + status + "</td>" +
                            "<td>" + priority + "</td>" +
                            "<td class='task-pk' style='display:none;'>" + 0 + "</td>" +
                            "<td>" + jobname + "</td>" +
                            "<td>" + jobsubmitter + "</td>" +
                            "</tr>")
                        });
                    }
                });

                $.ajax({
                    url: '',
                    dataType: 'json',
                    method: 'post',
                    data: {'x':x, 'y':y},
                    success: function(data){
                        $('#anwser').append("<br/>");
                        $('#anwser').append(data.consoles);
                        $('#anwser-ml-report').append(data.plots);
                        $('#anwser-ml-3d-report').append(data._3dplots);
                    },
                    complete: function(data){
                        //setTimeout(worker, 5000);
                    },
                });
            });
        });





    </script>
    <!-- Set Scroll bottom -->


    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="{% static 'analyzer/js/surface3d.js' %}"></script>
{% endblock %}